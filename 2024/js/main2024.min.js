/**
 * Check if an element is out of the viewport
 * @param  {Node}  elem The element to check
 * @return {Object}     A set of booleans for each side of the element
 */

/* setting Element */
const
	allPage = document.querySelector(`#page`),
	ScrollTarget = document.querySelector(`#page .container`),
	viewportCheckTarget = document.querySelector(`#profilio`);

const isOutOfViewport = function (el) {
	// Get element's bounding
	let bounding = el.getBoundingClientRect();

	// Check if it's out of the viewport on each side
	let out = {};
	// out.top = bounding.top < 0;
	// out.top = bounding.top < 0;
	// out.right = bounding.right > (window.innerWidth || document.documentElement.clientWidth);
	// out.bottom = bounding.bottom > (window.innerHeight || document.documentElement.clientHeight);
	// out.left = bounding.left < 0;
	// out.any = out.top || out.left || out.bottom || out.right;

	out.top = bounding.top < (window.innerHeight * 0.8 || document.documentElement.clientHeight * 0.8);
	out.bottom = bounding.bottom > (window.innerHeight * 0.2 || document.documentElement.clientHeight * 0.2);
	out.any = !out.top || !out.bottom;

	let outSize = `top:${out.top}  bottom:${out.bottom} || and: ${out.any} || ${ScrollTarget.scrollTop}`
	let outstatus = `${out.top ? out.top & !out.bottom ? 'footerOn' :'profilioOn' : 'none'}`;
	return outstatus;
};

const inViewportClass = function () {
	if(isOutOfViewport(viewportCheckTarget) == 'footerOn'){
		allPage.classList.remove(`left`)
		allPage.classList.add(`full`)
	} else if(isOutOfViewport(viewportCheckTarget) == 'profilioOn'){
		allPage.classList.remove(`full`)
		allPage.classList.add(`left`)
	}	else{
		allPage.classList.remove(`full`)
		allPage.classList.remove(`left`)
	}
};

const logViewport = function () {
	let isOut = isOutOfViewport(viewportCheckTarget);
	console.log(` ${isOut}`);
};

ScrollTarget.addEventListener('scroll', inViewportClass, false);

const checkDOMState = function (){
  // console.log('DOM:', document.readyState);
  if (document.readyState === 'interactive') {
    // console.log('DOM is fully parsed.');
  } else if (document.readyState === 'complete') {
    // console.log('Fully loaded.');
		// ScrollTarget.scrollTop = 0;
    document.removeEventListener('readystatechange', checkDOMState);
  }
}
document.addEventListener('DOMContentLoaded', function() {

});
document.addEventListener('readystatechange', checkDOMState);
// document.addEventListener('DOMContentLoaded', checkDOMState);